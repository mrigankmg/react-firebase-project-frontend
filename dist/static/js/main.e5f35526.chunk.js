(this["webpackJsonpreact-firebase-project"]=this["webpackJsonpreact-firebase-project"]||[]).push([[0],{138:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(57),i=a.n(c),s=a(47),o=a(25),l=a(187),u=a(205),j=a(192),p=a(183),x=a(206),d=a(194),b=a(207),h=a(186),f=a(202),O=a(0),g=a.n(O),m=a(3),v=a(17),w=a(190),y=a(196),k=a(198),T=a(88),E=a(199),S=a(200),R=a(201),U=a(184),C=a(106),A=(a(127),a(140),a(142),a(141),C.a.initializeApp({apiKey:"AIzaSyATQg8eUfRXfZzVtBlbduaOQ8eZaP7YTi8",authDomain:"react-firebase-project-25c3e.firebaseapp.com",projectId:"react-firebase-project-25c3e",storageBucket:"react-firebase-project-25c3e.appspot.com",messagingSenderId:"533700980919",appId:"1:533700980919:web:f1ea58fefc75432b3b5d32",measurementId:"G-DEECMGWN5W"})),B=A.auth(),D=A.functions(),I=A.firestore(),F=A.storage(),P=[{label:"Firebrick",value:"#B22222"},{label:"Light Blue",value:"#ADD8E6"},{label:"Sage Green",value:"#535E4B"},{label:"Antique White",value:"#FAEBD7"},{label:"Dark Salmon",value:"#E9967A"},{label:"Gold",value:"#FFD700"},{label:"Royal Blue",value:"#4169E1"},{label:"Orange Red",value:"#FF4500"},{label:"Byzantium",value:"#702963"},{label:"Coffee",value:"#6F4E37"}],W=a(98),q=a(195),L=a(4),z=n.a.createContext(),G=function(){return Object(r.useContext)(z)},J=function(e){var t=e.children,a=Object(r.useState)(),n=Object(v.a)(a,2),c=n[0],i=n[1],s=Object(r.useState)([]),l=Object(v.a)(s,2),u=l[0],j=l[1],p=Object(r.useState)(),x=Object(v.a)(p,2),d=x[0],b=x[1],h=Object(r.useState)(!1),f=Object(v.a)(h,2),O=f[0],w=f[1],y=Object(r.useState)(!1),k=Object(v.a)(y,2),T=k[0],E=k[1],S=Object(o.g)();Object(r.useEffect)((function(){var e=2,t=function(){0===(e-=1)&&w(!0)},a=B.onAuthStateChanged((function(e){b(e),t()})),r=I.collection("players").orderBy("createdAt").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(W.a)(Object(W.a)({},e.data()),{},{id:e.id}))})),j(a),t()}));return function(){a(),r()}}),[]),Object(r.useEffect)((function(){i("")}),[S]);var R=function(){var e=Object(m.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,t();case 3:E(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(m.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R(Object(m.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.signInWithEmailAndPassword(t,a);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R(Object(m.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A={currentUser:d,allPlayers:u,error:c,setError:i,signUp:function(e,t,a){R(Object(m.a)(g.a.mark((function r(){return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,B.createUserWithEmailAndPassword(t,a);case 3:return r.next=5,D.httpsCallable("addPlayerRecord")({name:e});case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),i(r.t0.message);case 10:case"end":return r.stop()}}),r,null,[[0,7]])}))))},logIn:U,logOut:C};return Object(L.jsx)(z.Provider,{value:A,children:O&&!T?t:Object(L.jsx)(q.a,{sx:{position:"absolute",left:"50%",top:"50%",WebkitTransform:"translate(-50%, -50%)",transform:"translate(-50%, -50%)"}})})},M=function(e){var t=e.colour,a=e.name,n=e.photoDownloadUrl,c=Object(r.useState)(!1),i=Object(v.a)(c,2),s=i[0],o=i[1],l=Object(r.useState)(!1),u=Object(v.a)(l,2),p=u[0],x=u[1],d=G(),b=d.allPlayers,h=d.setError,f=d.currentUser,O=Object(r.useRef)(),C=function(){var e=Object(m.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,h(""),o(!0),e.next=6,D.httpsCallable("changeColour")({colour:t.target.value});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h("Unable to update colour.");case 11:o(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(m.a)(g.a.mark((function e(t){var a,r,n,c,i,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=t.target.files).length>0)){e.next=27;break}if(r=a[0],!new Set(["image/png","image/jpg","image/jpeg","image/gif"]).has(r.type)){e.next=26;break}return h(""),x(!0),n=F.ref(),c=r.name.split(".")[1],i=n.child("".concat(f.uid,".").concat(c)),e.prev=10,e.next=13,i.put(r);case 13:return e.next=15,i.getDownloadURL();case 15:return s=e.sent,e.next=18,D.httpsCallable("updatePhotoDownloadUrl")({url:s});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),h("Unable to update picture.");case 23:x(!1),e.next=27;break;case 26:h("Please select an image of type png/jpg/jpeg/gif.");case 27:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=new Set;return b.forEach((function(a){a.colour!==t&&e.add(a.colour)})),P.filter((function(t){return!e.has(t.value)}))};return Object(L.jsxs)(y.a,{sx:{maxWidth:"350px",margin:"auto"},children:[Object(L.jsxs)(k.a,{sx:{backgroundColor:t,padding:"24px",borderBottom:""===t&&B().length>0?"thin solid #606060":null},children:[Object(L.jsx)(j.a,{alt:"".concat(a,"'s avatar'"),src:n,sx:{height:"120px",width:"120px","&:hover":{cursor:"pointer"},margin:"auto"},onClick:function(){O.current.click()}}),Object(L.jsx)("input",{ref:O,disabled:p,type:"file",accept:"image/*",onChange:A,hidden:!0}),Object(L.jsx)(T.a,{variant:"h5",sx:{color:""===t?"#606060":"white",textAlign:"center",wordBreak:"break-all",margin:"0",marginTop:"20px"},children:a})]}),B().length>0&&Object(L.jsx)(E.a,{sx:{padding:"20px"},children:Object(L.jsxs)(S.a,{fullWidth:!0,children:[Object(L.jsx)(R.a,{id:"player-tile-label",children:"Colour"}),Object(L.jsx)(U.a,{disabled:s,labelId:"player-tile-label",value:t,label:"Colour",onChange:C,children:B().map((function(e,t){return Object(L.jsx)(w.a,{value:e.value,children:e.label},"colour-".concat(t))}))})]})})]})},N=function(){var e=G(),t=e.currentUser,a=e.allPlayers,r=e.logOut,c=e.error;return Object(L.jsxs)(x.a,{sx:{paddingTop:"20px",position:"relative"},children:[Object(L.jsx)(d.a,{sx:{position:"absolute",top:"20px",right:"20px"},color:"primary",variant:"link",onClick:r,children:"Log Out"}),Object(L.jsxs)(b.a,{sx:{marginTop:"50px"},children:[c&&Object(L.jsx)(h.a,{severity:"error",sx:{marginBottom:"20px"},children:c}),function(){var e=a.find((function(e){return t.uid===e.id}));return e?Object(L.jsx)(M,{colour:e.colour,name:e.name,photoDownloadUrl:e.photoDownloadUrl},e.id):null}(),Object(L.jsx)(f.a,{sx:{maxWidth:"500px",margin:"40px auto"},children:function(){var e=[];return a.forEach((function(a){if(a.id!==t.uid){var r=""!==a.colour,c=a.colour;r||(c=e.length%2===0?"#F0F0F0":"white"),e.push(Object(L.jsx)(n.a.Fragment,{children:Object(L.jsxs)(l.a,{alignItems:"flex-start",sx:{backgroundColor:c,display:"flex",alignItems:"center",paddingBlock:"24px"},children:[Object(L.jsx)(u.a,{sx:{margin:"0"},children:Object(L.jsx)(j.a,{alt:"".concat(a.name,"'s avatar'"),src:a.photoDownloadUrl,sx:{height:"50px",width:"50px",marginRight:"16px"}})}),Object(L.jsx)(p.a,{primary:a.name,sx:{color:r?"white":"#606060",textAlign:"center",wordBreak:"break-all",margin:"0"}})]})},a.id))}})),e}()})]})]})},Q=a(208),Z=a(179),H=a(188),K="/signup",V="/login",X=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=Object(r.useRef)(),n=Object(r.useRef)(),c=G(),i=c.signUp,o=c.error,l=c.setError;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(y.a,{children:Object(L.jsxs)(k.a,{children:[Object(L.jsx)(T.a,{variant:"h3",sx:{textAlign:"center"},children:"Sign Up"}),o&&Object(L.jsx)(h.a,{severity:"error",sx:{marginTop:"20px"},children:o}),Object(L.jsxs)("form",{onSubmit:function(r){r.preventDefault();var c=a.current.value;if(c===n.current.value){var s=e.current.value,o=t.current.value;i(s,o,c)}else l("Passwords don't match.")},children:[Object(L.jsxs)(Q.a,{id:"first-name",sx:{marginTop:"20px"},children:[Object(L.jsx)(Z.a,{children:"First Name"}),Object(L.jsx)(H.a,{sx:{marginTop:"10px"},inputRef:e,variant:"standard",required:!0})]}),Object(L.jsxs)(Q.a,{id:"email",sx:{marginTop:"20px"},children:[Object(L.jsx)(Z.a,{children:"Email"}),Object(L.jsx)(H.a,{type:"email",sx:{marginTop:"10px"},inputRef:t,variant:"standard",required:!0})]}),Object(L.jsxs)(Q.a,{id:"password",sx:{marginTop:"20px"},children:[Object(L.jsx)(Z.a,{children:"Password"}),Object(L.jsx)(H.a,{type:"password",sx:{marginTop:"10px"},inputRef:a,variant:"standard",required:!0})]}),Object(L.jsxs)(Q.a,{id:"re-entered-password",sx:{marginTop:"20px"},children:[Object(L.jsx)(Z.a,{children:"Confirm Password"}),Object(L.jsx)(H.a,{type:"password",sx:{marginTop:"10px"},inputRef:n,variant:"standard",required:!0})]}),Object(L.jsx)(d.a,{fullWidth:!0,disableElevation:!0,sx:{marginTop:"40px",paddingBlock:"10px"},color:"primary",variant:"outlined",type:"submit",children:"Sign Up"})]})]})}),Object(L.jsxs)(T.a,{variant:"body1",sx:{textAlign:"center",margin:0,marginTop:"20px"},children:["Already have an account? ",Object(L.jsx)(s.b,{to:V,children:"Log In"})]})]})},Y=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=G(),n=a.logIn,c=a.error;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(y.a,{children:Object(L.jsxs)(k.a,{children:[Object(L.jsx)(T.a,{variant:"h3",sx:{textAlign:"center"},children:"Log In"}),c&&Object(L.jsx)(h.a,{severity:"error",sx:{marginTop:"20px"},children:c}),Object(L.jsxs)("form",{onSubmit:function(a){a.preventDefault(),n(e.current.value,t.current.value)},children:[Object(L.jsxs)(Q.a,{id:"email",sx:{marginTop:"20px"},children:[Object(L.jsx)(Z.a,{children:"Email"}),Object(L.jsx)(H.a,{type:"email",sx:{marginTop:"10px"},inputRef:e,variant:"standard",required:!0})]}),Object(L.jsxs)(Q.a,{id:"password",sx:{marginTop:"20px"},children:[Object(L.jsx)(Z.a,{children:"Password"}),Object(L.jsx)(H.a,{type:"password",sx:{marginTop:"10px"},inputRef:t,variant:"standard",required:!0})]}),Object(L.jsx)(d.a,{fullWidth:!0,disableElevation:!0,sx:{marginTop:"40px",paddingBlock:"10px"},color:"primary",variant:"outlined",type:"submit",children:"Log In"})]})]})}),Object(L.jsxs)(T.a,{variant:"body1",sx:{textAlign:"center",margin:0,marginTop:"20px"},children:["Don't have an account? ",Object(L.jsx)(s.b,{to:K,children:"Sign Up"})]})]})},$=function(){var e=Object(o.g)();return Object(L.jsx)(x.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:Object(L.jsx)(b.a,{sx:{marginBlock:"40px",width:"100%",maxWidth:"500px"},children:e.pathname===K?Object(L.jsx)(X,{}):Object(L.jsx)(Y,{})})})},_=(a(138),function(){return G().currentUser?Object(L.jsx)(o.b,{}):Object(L.jsx)(o.a,{to:V})}),ee=function(){return G().currentUser?Object(L.jsx)(o.a,{to:"/"}):Object(L.jsx)(o.b,{})},te=a(109),ae=a(191),re=Object(te.a)({typography:{fontFamily:["Raleway"]}});i.a.render(Object(L.jsx)(n.a.StrictMode,{children:Object(L.jsx)(ae.a,{theme:re,children:Object(L.jsx)(s.a,{children:Object(L.jsx)(J,{children:Object(L.jsxs)(o.e,{children:[Object(L.jsx)(o.c,{exact:!0,path:"/",element:Object(L.jsx)(_,{}),children:Object(L.jsx)(o.c,{exact:!0,path:"/",element:Object(L.jsx)(N,{})})}),Object(L.jsx)(o.c,{exact:!0,path:K,element:Object(L.jsx)(ee,{}),children:Object(L.jsx)(o.c,{exact:!0,path:K,element:Object(L.jsx)($,{})})}),Object(L.jsx)(o.c,{exact:!0,path:V,element:Object(L.jsx)(ee,{}),children:Object(L.jsx)(o.c,{exact:!0,path:V,element:Object(L.jsx)($,{})})})]})})})})}),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.e5f35526.chunk.js.map